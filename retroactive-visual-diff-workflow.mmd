flowchart TD
    Start([Start]) --> ParseArgs[Parse Arguments<br>START_COMMIT, END_COMMIT, INTERVAL, DOCKER_IMAGE]
    ParseArgs --> ValidateArgs[Validate Arguments]
    ValidateArgs --> CreateDirs[Create Directory Structure]

    subgraph "Setup Phase"
        CreateDirs --> SaveCurrentState[Save Current State<br>Branch, Tools, Config]
        SaveCurrentState --> PrepareDocker[Prepare Docker Image<br>With All Required Tools]
        PrepareDocker --> GetCommits[Get Commit List and Calculate Intervals]
    end

    subgraph "Processing Loop"
        GetCommits --> LoopStart{For each selected commit}
        LoopStart --> |No more commits| Finalize[Finalize Process]

        LoopStart --> |Next commit| CleanWorkspace[Clean Workspace<br>git clean -fdx]
        CleanWorkspace --> CheckoutCommit[Checkout Commit<br>git checkout --force]

        CheckoutCommit --> InjectMakeTargets[Inject Temporary Makefile<br>With Standard Targets]

        subgraph "Build and Capture"
            InjectMakeTargets --> RunDocker[Run in Docker Container<br>Using Provided Image]
            RunDocker --> BuildApp[Build App<br>make build-retroactive]
            BuildApp --> StartApp[Start App<br>make start-retroactive]
            StartApp --> HealthCheck[Health Check<br>Wait for App Readiness]
            HealthCheck --> CaptureScreenshot[Capture Screenshot<br>make capture-screenshot]
        end

        CaptureScreenshot --> StopApp[Stop App<br>make stop-retroactive]
        StopApp --> CompareImages[Compare With Previous<br>If Available]
        CompareImages --> GenerateCommitReport[Generate Report<br>For This Commit]
        GenerateCommitReport --> ResetWorkspace[Reset Workspace<br>git reset --hard]
        ResetWorkspace --> LoopStart
    end

    subgraph "Finalization Phase"
        Finalize --> RestoreState[Restore Original State]
        RestoreState --> GenerateTimeline[Generate Visual Timeline]
        GenerateTimeline --> CreateIndexPage[Create Index Page<br>With Navigation]
        CreateIndexPage --> End([End])
    end