graph TD

    subgraph "SOLID Design: Clear Responsibilities"
        A2[useTitleGeneration] -->|"Uses"| B2[TitleGenerationService]
        B2 -->|"Depends On"| C2[CompletionSubmissionService]
        B2 -->|"Depends On"| D2[MessageFormatter]
        B2 -->|"Depends On"| E2[StateUpdater]
        F2[ChatSubmissionService] -->|"Implements"| C2
        F2 -->|"Implements"| G2[StreamingSubmissionService]
        H2[TitleMessageFormatter] -->|"Implements"| D2
        I2[ChatStateUpdater] -->|"Implements"| E2
        
        style A2 fill:#ccffcc,stroke:#00aa00
        style B2 fill:#ccffcc,stroke:#00aa00
        style C2 fill:#ccffcc,stroke:#00aa00
        style D2 fill:#ccffcc,stroke:#00aa00
        style E2 fill:#ccffcc,stroke:#00aa00
        style F2 fill:#ccffcc,stroke:#00aa00
        style G2 fill:#ccffcc,stroke:#00aa00
        style H2 fill:#ccffcc,stroke:#00aa00
        style I2 fill:#ccffcc,stroke:#00aa00
    end
    

    
    %% Annotations for SOLID Design
    S2[SRP Benefit:<br/>Single responsibility<br/>per component]
    O2[OCP Benefit:<br/>Extend without modifying]
    L2[LSP Benefit:<br/>Consistent interfaces]
    I2[ISP Benefit:<br/>Focused interfaces<br/>for specific use cases]
    D2[DIP Benefit:<br/>Depend on abstractions<br/>not implementations]
    
    S2 --- B2
    O2 --- C2
    L2 --- F2
    I2 --- G2
    D2 --- B2